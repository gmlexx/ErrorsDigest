# coding: utf-8
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.metrics.pairwise import cosine_similarity

documents = {1:"""DiadocCommons.Http.Client.DiadocHttpClusterClient diadoc.web Can't perform request 'POST GetRangeBatch' to replica resolutionFilterIndex-v2 http://192.168.52.33:14873/.
Body: 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 (null)
DiadocSys.Net.Http.Client.ReplicaFailedException: The operation has timed out ---> System.Net.WebException: The operation has timed out
at System.Net.HttpWebRequest.GetResponse()
at DiadocSys.Net.Http.Client.HttpClient.GetResponse(HttpEndPoint endPoint, IHttpRequest request)
--- End of inner exception stack trace ---
at DiadocSys.Net.Http.Client.HttpClient.GetResponse(HttpEndPoint endPoint, IHttpRequest request)
at DiadocSys.Net.Http.Client.HttpClusterClient.TryGetResponse(IHttpRequest request, HttpReplica replica, ICollection`1 errors)"""}

tfidf_vectorizer = TfidfVectorizer(token_pattern=r'(?u)\b[a-zA-Z_\'.:,]+[\s(){}\[\]=]')
tfidf_matrix = tfidf_vectorizer.fit(documents.values())

vectors = tfidf_matrix.transform(["""DiadocCommons.Http.Client.DiadocHttpClusterClient diadoc.web Can't perform request 'POST GetRangeBatch' to replica resolutionFilterIndex-v2 http://192.168.52.34:14873/.
Body: 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 (null)
DiadocSys.Net.Http.Client.ReplicaFailedException: The operation has timed out ---> System.Net.WebException: The operation has timed out
at System.Net.HttpWebRequest.GetResponse()
at DiadocSys.Net.Http.Client.HttpClient.GetResponse(HttpEndPoint endPoint, IHttpRequest request)
--- End of inner exception stack trace ---
at DiadocSys.Net.Http.Client.HttpClient.GetResponse(HttpEndPoint endPoint, IHttpRequest request)
at DiadocSys.Net.Http.Client.HttpClusterClient.TryGetResponse(IHttpRequest request, HttpReplica replica, ICollection`1 errors)"""])

for s in cosine_similarity(tfidf_matrix.transform(documents.values()), vectors):
    print s[0]

print tfidf_matrix.inverse_transform(vectors)
